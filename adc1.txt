{"id":"diagram","width":2500,"height":1200,"diagramBounds":{"x":0,"y":0,"width":210,"height":297,"transform":{"elements":[1,0,0,1,0,0]},"type":"MindFusion.Drawing.Rect"},"enabled":true,"measureUnit":6,"allowInplaceEdit":true,"font":{"name":"sans-serif","size":4},"defaultShape":"Rectangle","backBrush":"#E0E0E0","shapePen":"#000000","shapeBrush":"#FFFFFF","linkPen":"#000000","linkBrush":"#FFFFFF","linkBaseShape":null,"linkHeadShape":"Arrow","linkBaseShapeSize":5,"linkHeadShapeSize":2,"linkHitDistance":0,"scrollLeft":0,"scrollTop":0,"routeLinks":true,"roundedLinks":true,"roundedLinksRadius":2,"linkCrossings":0,"crossingRadius":1.5,"zoomFactor":100,"showAnchors":2,"modificationStart":0,"delKeyAction":2,"gridStyle":0,"gridColor":"#8c8c96","gridSizeX":4,"gridSizeY":4,"gridOffsetX":0,"gridOffsetY":0,"showGrid":false,"alignToGrid":true,"magnifierEnabled":false,"magnifierShape":"Circle","magnifierFactor":150,"magnifierWidth":30,"magnifierHeight":30,"magnifierFrameThickness":1,"magnifierShading":true,"magnifierFrameColor":"black","magnifierSecondaryFrameColor":"gray","undoEnabled":false,"behavior":2,"expandOnIncoming":false,"adjustmentHandlesSize":2,"showDisabledHandles":true,"autoResize":1,"autoScroll":true,"scrollZoneSize":8,"autoScrollAmount":0,"allowMultipleResize":false,"allowUnconnectedLinks":false,"tag":null,"style":null,"theme":null,"backgroundImageAlign":4,"shadowOffsetX":4,"shadowOffsetY":4,"shadowsStyle":1,"items":[{"__type":"MindFusion.Diagramming.ShapeNode","instanceId":0,"zIndex":0,"tag":null,"id":"micro-xplained(ATmega328P)","text":"","textPadding":{"left":1,"top":1,"right":1,"bottom":1},"ignoreLayout":false,"selected":false,"visible":true,"locked":false,"tooltip":"","hyperLink":"","shadowOffsetX":4,"shadowOffsetY":4,"style":null,"bounds":{"x":60,"y":40,"width":55,"height":114,"transform":{"elements":[1,0,0,1,0,0]},"type":"MindFusion.Drawing.Rect"},"anchorPattern":{"points":[{"x":0,"y":65,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"yellow","column":-1,"tag":"C.0","size":2},{"x":0,"y":72,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"yellow","column":-1,"tag":"C.1","size":2},{"x":0,"y":79,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"yellow","column":-1,"tag":"C.2","size":2},{"x":0,"y":85,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"yellow","column":-1,"tag":"C.3","size":2},{"x":0,"y":91,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"yellow","column":-1,"tag":"C.4","size":2},{"x":0,"y":97,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"yellow","column":-1,"tag":"C.5","size":2},{"x":100,"y":97,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"D.0","size":2},{"x":100,"y":91,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"D.1","size":2},{"x":100,"y":85,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"D.2","size":2},{"x":100,"y":78,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"D.3","size":2},{"x":100,"y":72,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"D.4","size":2},{"x":100,"y":65,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"D.5","size":2},{"x":100,"y":59,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"D.6","size":2},{"x":100,"y":53,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"D.7","size":2},{"x":100,"y":45,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"B.0","size":2},{"x":100,"y":39,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"B.1","size":2},{"x":100,"y":33,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"B.2","size":2},{"x":100,"y":26,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"B.3","size":2},{"x":100,"y":20,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"B.4","size":2},{"x":100,"y":13,"allowIncoming":1,"allowOutgoing":1,"markStyle":4,"color":"darkblue","column":-1,"tag":"B.5","size":2},{"x":40,"y":99,"allowIncoming":1,"allowOutgoing":0,"markStyle":4,"color":"blue","column":-1,"tag":"B.7","size":2}]},"rotationAngle":0,"enabledHandles":511,"handlesStyle":1,"expanded":true,"expandable":false,"allowIncomingLinks":true,"allowOutgoingLinks":true,"obstacle":true,"effects":[],"shape":"Rectangle","imageLocation":"images/_img_micro_xplained.png","textAlignment":1,"lineAlignment":1,"transparent":false,"imageAlign":2,"rotateText":true,"rotateImage":true},{"__type":"MindFusion.Diagramming.ShapeNode","instanceId":1,"zIndex":1,"tag":null,"id":"codenode","text":"/**********************************************/\n// Project Name: \n// Author: \n// Date: 15/7/2015  17:59\n// Code auto-generated by System Designer from www.techideas.co.nz\n\n/**********************************************/\n//Hardware defines\n//make sure your oscillator setting matches this \n#define F_CPU 16000000//crystal \n\n/**********************************************/\n//Header files with various functions\n//#include <avr/io.h> \n//#include <stdint.h> \n//#include <util/delay.h>  \n//#include <avr/interrupt.h>  \n//#include <avr/eeprom.h>  \n//#include <stdio.h>  \n//#include <string.h>  \n//#include <avr/pgmspace.h>  \n\n/**********************************************/\n//Hardware macros for outputs\n#define set_led_B5   PORTB |= (1<<PB5)\n#define clr_led_B5   PORTB &= ~(1<<PB5)\n#define toggle_led_B5   PORTB ^= (1<<PB5)\n//Hardware macros for inputs\n#define tactSw_B7_IsLow   ~PINB & (1<<PB7)\n#define tactSw_B7_IsHigh   PINB & (1<<PB7)\n//Hardware macros for ADC inputs\n#define LM35_1 0     //macro to refer to ADC channel\n\n/**********************************************/\n//Configure ADC\nvoid init_ADC() {\n    //At 16MHZ set prescaler to 128 to get 125Khz clock\n    ADCSRA |= ((1 << ADPS2) | (1 << ADPS1) | (1 << ADPS0));\n    //At 1MHz set prescaler to 8 to get 125Khz clock\n    //ADCSRA |= ((1<<ADPS1)|(1<<ADPS0));\n    //AVcc as voltage reference with external capacitor on ARef\n    //ADMUX |= (1<<REFS1);      //uncomment this line for internal voltage\n    ADMUX |= (1 << REFS0);\n    ADCSRA |= (1 << ADEN); //Power on the ADC\n    ADCSRA |= (1 << ADSC); //Start initial conversion\n}\n// get a single adc reading from one channel\nuint16_t read_adc(uint8_t channel) {\n    ADMUX &= 0xF0; //Clear previously read channel\n    ADMUX |= channel; //Set to new channel to read\n    ADCSRA |= (1 << ADSC); //Starts a new conversion\n    while (ADCSRA & (1 << ADSC)); //Wait until the conversion is done\n    return ADCW; //Returns the value from the channel\n}\n\n/**********************************************/\n//Function Prototypes\n\n/**********************************************/\n//Declare & initialise global variables\n/**********************************************/\n//Main Program starts here\nint main() {\n    // Initial hardware setups go here\n    uint16_t adc=0;\n\n    // Input & Output Hardware setups\n    // Initially make all micro pins outputs\n    DDRB = 0xff; //make all the pins on the port outputs\n    DDRC = 0xff; //make all the pins on the port outputs\n    DDRD = 0xff; //make all the pins on the port outputs\n    // Then make these pins inputs\n    DDRB &= ~ (1 << PB7);\n    DDRC &= ~ (1 << PC0);\n\n    while (1) {\n        adc++;\n    } //end while(1)\n} //end of main\n\n/**********************************************/\n//Functions go here","textPadding":{"left":1,"top":1,"right":1,"bottom":1},"ignoreLayout":false,"selected":false,"visible":false,"locked":false,"tooltip":"","hyperLink":"","shadowOffsetX":4,"shadowOffsetY":4,"style":null,"bounds":{"x":60,"y":154,"width":55,"height":114,"transform":{"elements":[1,0,0,1,0,0]},"type":"MindFusion.Drawing.Rect"},"rotationAngle":0,"enabledHandles":511,"handlesStyle":1,"expanded":true,"expandable":false,"allowIncomingLinks":true,"allowOutgoingLinks":true,"obstacle":true,"effects":[],"shape":"Rectangle","imageLocation":"","textAlignment":1,"lineAlignment":1,"transparent":false,"imageAlign":1,"rotateText":true,"rotateImage":true},{"__type":"MindFusion.Diagramming.SvgNode","instanceId":2,"zIndex":2,"tag":null,"id":"led","text":"led_B5","textPadding":{"left":1,"top":1,"right":1,"bottom":1},"ignoreLayout":false,"brush":"Red","selected":false,"visible":true,"locked":false,"tooltip":"","hyperLink":"","shadowOffsetX":4,"shadowOffsetY":4,"style":null,"bounds":{"x":140,"y":50,"width":20,"height":10,"transform":{"elements":[1,0,0,1,0,0]},"type":"MindFusion.Drawing.Rect"},"anchorPattern":{"points":[{"x":0,"y":35,"allowIncoming":true,"allowOutgoing":false,"markStyle":4,"color":"#0000FF","column":-1,"tag":"led","size":2}]},"rotationAngle":0,"enabledHandles":511,"handlesStyle":1,"expanded":true,"expandable":false,"allowIncomingLinks":true,"allowOutgoingLinks":false,"obstacle":true,"effects":[],"shape":"Rectangle","imageLocation":"","textAlignment":1,"lineAlignment":2,"transparent":false,"imageAlign":1,"rotateText":true,"rotateImage":true,"contentFile":"images/_img_output_led.svg"},{"__type":"MindFusion.Diagramming.SvgNode","instanceId":3,"zIndex":4,"tag":null,"id":"tact_binary__","text":"tactSw_B7","textPadding":{"left":1,"top":1,"right":1,"bottom":1},"ignoreLayout":false,"selected":false,"visible":true,"locked":false,"tooltip":"","hyperLink":"","shadowOffsetX":4,"shadowOffsetY":4,"style":null,"bounds":{"x":100,"y":180,"width":20,"height":20,"transform":{"elements":[1,0,0,1,0,0]},"type":"MindFusion.Drawing.Rect"},"rotationAngle":0,"enabledHandles":511,"handlesStyle":1,"expanded":true,"expandable":false,"allowIncomingLinks":false,"allowOutgoingLinks":true,"obstacle":true,"effects":[],"shape":"Rectangle","imageLocation":"","textAlignment":1,"lineAlignment":2,"transparent":false,"imageAlign":1,"rotateText":true,"rotateImage":true,"contentFile":"images/_img_input_binary_tactswitch.svg"},{"__type":"MindFusion.Diagramming.SvgNode","instanceId":4,"zIndex":6,"tag":null,"id":"_analog_lm35","text":"LM35_1","textPadding":{"left":1,"top":1,"right":1,"bottom":1},"ignoreLayout":false,"selected":false,"visible":true,"locked":false,"tooltip":"","hyperLink":"","shadowOffsetX":4,"shadowOffsetY":4,"style":null,"bounds":{"x":10.817664082845052,"y":90.53133042653401,"width":24,"height":24,"transform":{"elements":[1,0,0,1,0,0]},"type":"MindFusion.Drawing.Rect"},"rotationAngle":0,"enabledHandles":511,"handlesStyle":1,"expanded":true,"expandable":false,"allowIncomingLinks":false,"allowOutgoingLinks":true,"obstacle":true,"effects":[],"shape":"Rectangle","imageLocation":"","textAlignment":1,"lineAlignment":2,"transparent":false,"imageAlign":1,"rotateText":true,"rotateImage":true,"contentFile":"images/_img_input_analog_LM35.jpg"},{"__type":"MindFusion.Diagramming.DiagramLink","instanceId":5,"zIndex":3,"tag":"B.5","id":null,"text":"","textPadding":{"left":1,"top":1,"right":1,"bottom":1},"ignoreLayout":false,"selected":false,"visible":true,"locked":false,"tooltip":"","hyperLink":"","shadowOffsetX":4,"shadowOffsetY":4,"style":null,"origin":0,"destination":2,"originConnection":{"x":100,"y":13,"type":"MindFusion.Drawing.Point"},"destinationConnection":{"x":0,"y":35,"type":"MindFusion.Drawing.Point"},"controlPoints":[{"x":115,"y":54.82,"type":"MindFusion.Drawing.Point"},{"x":127.5,"y":54.82,"type":"MindFusion.Drawing.Point"},{"x":127.5,"y":53.5,"type":"MindFusion.Drawing.Point"},{"x":140,"y":53.5,"type":"MindFusion.Drawing.Point"}],"shape":1,"baseShape":null,"headShape":"Arrow","baseShapeSize":5,"headShapeSize":2,"baseBrush":null,"headBrush":null,"textStyle":0,"textAlignment":1},{"__type":"MindFusion.Diagramming.DiagramLink","instanceId":6,"zIndex":5,"tag":"B.7","id":null,"text":"1","textPadding":{"left":1,"top":1,"right":1,"bottom":1},"ignoreLayout":false,"pen":"#FF0000","strokeThickness":2,"selected":false,"visible":true,"locked":false,"tooltip":"","hyperLink":"","shadowOffsetX":4,"shadowOffsetY":4,"style":null,"origin":3,"destination":0,"originConnection":{"x":37.90322580645167,"y":0,"type":"MindFusion.Drawing.Point"},"destinationConnection":{"x":40,"y":99.00000000000001,"type":"MindFusion.Drawing.Point"},"controlPoints":[{"x":107.58064516129033,"y":180,"type":"MindFusion.Drawing.Point"},{"x":107.58064516129033,"y":167,"type":"MindFusion.Drawing.Point"},{"x":82,"y":167,"type":"MindFusion.Drawing.Point"},{"x":82,"y":152.86,"type":"MindFusion.Drawing.Point"}],"shape":1,"baseShape":null,"headShape":"Arrow","baseShapeSize":5,"headShapeSize":2,"baseBrush":null,"headBrush":null,"textStyle":0,"textAlignment":1},{"__type":"MindFusion.Diagramming.DiagramLink","instanceId":7,"zIndex":7,"tag":"C.0","id":null,"text":"0.27","textPadding":{"left":1,"top":1,"right":1,"bottom":1},"ignoreLayout":false,"selected":false,"visible":true,"locked":false,"tooltip":"","hyperLink":"","shadowOffsetX":4,"shadowOffsetY":4,"style":null,"origin":4,"destination":0,"originConnection":{"x":100.00000000000001,"y":53.15296888351444,"type":"MindFusion.Drawing.Point"},"destinationConnection":{"x":0,"y":65.00000000000001,"type":"MindFusion.Drawing.Point"},"controlPoints":[{"x":34.817664082845056,"y":103.28804295857748,"type":"MindFusion.Drawing.Point"},{"x":47.40883204142253,"y":103.28804295857748,"type":"MindFusion.Drawing.Point"},{"x":47.40883204142253,"y":114.10000000000001,"type":"MindFusion.Drawing.Point"},{"x":60,"y":114.10000000000001,"type":"MindFusion.Drawing.Point"}],"shape":1,"baseShape":null,"headShape":"Arrow","baseShapeSize":5,"headShapeSize":2,"baseBrush":null,"headBrush":null,"textStyle":0,"textAlignment":1}],"laneGrid":{"columnHeader":{"subHeaders":[],"width":0,"height":0,"resizeType":1,"title":"","rotateTitle":false,"titleColor":"#000000","style":{},"rowHeader":false},"rowHeader":{"subHeaders":[],"width":0,"height":0,"resizeType":1,"title":"","rotateTitle":false,"titleColor":"#000000","style":{},"rowHeader":true},"leftMargin":0,"topMargin":0,"minHeaderSize":10,"topLeftAreaText":"","hookHeaders":true,"headersOnTop":true,"rowWidths":[],"columnHeights":[],"style":{"leftBorderThickness":1,"topBorderThickness":1,"rightBorderThickness":1,"bottomBorderThickness":1,"textAlignment":1,"lineAlignment":1},"cells":{"data":[],"rowCount":0,"columnCount":0}},"images":[],"svgs":[],"effects":[]}